version: "1.0"

services:
  spark:
    image: spark
    container_name: spark
    volumes:
      - ./resources:/opt/spark/demo
    ports:
      - 4040:4040
    command: |
        bash -c "spark-submit --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.1.1,org.elasticsearch:elasticsearch-spark-30_2.12:7.12.1  demo/code/process_datas.py"
    depends_on:
      - load_data
    networks:
        tap:

networks:
  tap:
    external: true